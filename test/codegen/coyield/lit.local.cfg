import lit
config.name = 'CoYieldPass'
config.build_pass_root = os.path.join(config.lit_config_dir, '..', '..' ,'build', 'codegen') 

#todo add normal handling of config files
config.substitutions.append(('%build', f"""
clang++ %s -emit-llvm -Xclang -disable-llvm-passes -S -std=c++20 -o - 
| opt -load-pass-plugin={config.build_pass_root}/libCoYieldPass.so --coroutine-file=%s.yml 
-passes=coyield_insert -verify-each -stop-after=coyield_insert -S"""))
